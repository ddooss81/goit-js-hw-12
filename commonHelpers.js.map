{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["  \nconst galleryEl = document.querySelector('.gallery-o');\n\nconst options = {\n  captions: true,\n  captionSelector: 'img',\n  captionType: 'attr',\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  animation: 250,\n};\nexport function renderImages(array, page) {\n    const markup = array\n        .map(\n            ({\n                largeImageURL,\n                webformatURL,\n                tags,\n                likes,\n                views,\n                comments,\n                downloads,\n            }) => {\n                return `\n        <div class=\"gallery\">\n            <a href=\"${largeImageURL}\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" title=\"${tags}\" width=\"380\" height=\"220\" />\n            <ul class=\"info-cards-container\">\n                <li class=\"info-cards-elements\">likes<span>${likes}</span></li>\n                <li class=\"info-cards-elements\">views<span>${views}</span></li>\n                <li class=\"info-cards-elements\">comments<span>${comments}</span></li>\n                <li class=\"info-cards-elements\">downloads<span>${downloads}</span></li>\n            </ul>\n            </a>\n        </div>\n        `;\n            }\n        )\n        .join('');\n    if (page === 1) {\n        galleryEl.innerHTML = markup;\n    } else {\n        galleryEl.insertAdjacentHTML(\"beforeend\", markup);\n        const height = galleryEl.lastElementChild.getBoundingClientRect().height;\n        scrollBy({\n            behavior: 'smooth',\n            top: height * 3,\n        });\n    }\n}\n","import axios from \"axios\";\n\nexport async function getPhotoBySearch(value, currentPage) {\n    try {\n        const KEY = '42424645-ecd3f1048329df1dec069e6a8';\n        const response = await axios.get('https://pixabay.com/api/', {\n            params: {\n                key: KEY,\n                q: value,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: 'true',\n                page: currentPage,\n                per_page: '15'\n            }\n        });\n\n        if (response.data.total === 0) {\n            throw new Error('No images found');\n        }\n\n    return response.data;\n    } catch (error) {\n        throw error; \n    }\n}\n\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { renderImages } from './js/render-functions.js';\nimport { getPhotoBySearch } from './js/pixabay-api.js';\n\nconst formElem = document.querySelector('.search-form');\nconst galleryEl = document.querySelector('.gallery-o');\nconst loaderElem = document.querySelector('.loader');\nconst loaderElem2 = document.querySelector('.loader2');\nconst loadMoreBtn = document.querySelector('.more-btn');\n\nconst lightbox = new SimpleLightbox('.gallery-o a', {\n  captions: true,\n  captionSelector: 'img',\n  captionType: 'attr',\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  animation: 250,\n});\n\nlet value;\nlet page;\nlet maxPage;\n\nfunction onDocumentReady() {\n  hideLoader();\n\n  formElem.addEventListener('submit', onFormSubmit);\n}\n\nasync function onFormSubmit(event) {\n  event.preventDefault();\n\n  showLoader();\n  galleryEl.innerHTML = '';\n\n  page = 1;\n  value = formElem.querySelector('.input-search').value;\n\n  try {\n    const data = await getPhotoBySearch(value, page);\n    renderImages(data.hits, page);\n    lightbox.refresh();\n\n    maxPage = Math.ceil(data.totalHits / 15);\n  } catch (error) {\n    renderError(error);\n  } finally {\n    hideLoader();\n    checkBtnVisibleStatus();\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', onDocumentReady);\n\nfunction renderError(error) {\n  maxPage = undefined;\n  checkBtnVisibleStatus();\n  galleryEl.innerHTML = '';\n  iziToast.show({\n    message: `❌ \"${error}\". Please try again!`,\n    color: 'red',\n    position: 'topRight',\n    maxWidth: '400px',\n  });\n}\n\nfunction showLoader() {\n  loaderElem.style.display = 'block';\n}\n\nfunction hideLoader() {\n  loaderElem.style.display = 'none';\n}\n\nfunction showLoader2() {\n  loaderElem2.classList.remove('hidden');\n}\n\nfunction hideLoader2() {\n  loaderElem2.classList.add('hidden');\n}\n\nloadMoreBtn.addEventListener('click', async () => {\n  page++;\n  showLoader2();\n\n  try {\n    const images = await getPhotoBySearch(value, page);\n\n    renderImages(images.hits, page);\n    lightbox.refresh();\n\n    if (page > 1) {\n      hideLoader2();\n      checkBtnVisibleStatus();\n    }\n  } catch (error) {\n    iziToast.show({\n      message: `\"${error}\". UPS something wrong!`,\n      color: 'red',\n      position: 'topRight',\n      maxWidth: '400px',\n    });\n  }\n});\n\nfunction endOfCollection() {\n  if (page === maxPage) {\n    maxPage = undefined;\n    hideLoader2();\n    hideMoreLoadBtn();\n    iziToast.show({\n      message: `❌ \"We're sorry, but you've reached the end of search results.\"`,\n      color: 'red',\n      position: 'topRight',\n      maxWidth: '400px',\n    });\n  }\n}\n\nloadMoreBtn.addEventListener('click', endOfCollection);\n\nfunction showMoreLoadBtn() {\n  loadMoreBtn.classList.remove('hidden');\n}\n\nfunction hideMoreLoadBtn() {\n  loadMoreBtn.classList.add('hidden');\n}\n\nfunction checkBtnVisibleStatus() {\n  if (page >= maxPage || maxPage === undefined) {\n    hideMoreLoadBtn();\n  } else {\n    showMoreLoadBtn();\n  }\n}"],"names":["galleryEl","renderImages","array","page","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","height","getPhotoBySearch","value","currentPage","KEY","response","axios","error","formElem","loaderElem","loaderElem2","loadMoreBtn","lightbox","SimpleLightbox","maxPage","onDocumentReady","hideLoader","onFormSubmit","event","showLoader","data","renderError","checkBtnVisibleStatus","iziToast","showLoader2","hideLoader2","images","endOfCollection","hideMoreLoadBtn","showMoreLoadBtn"],"mappings":"owBACA,MAAMA,EAAY,SAAS,cAAc,YAAY,EAU9C,SAASC,EAAaC,EAAOC,EAAM,CACtC,MAAMC,EAASF,EACV,IACG,CAAC,CACG,cAAAG,EACA,aAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CAChB,IACuB;AAAA;AAAA,uBAEAN,CAAa;AAAA,wBACZC,CAAY,UAAUC,CAAI,YAAYA,CAAI;AAAA;AAAA,6DAELC,CAAK;AAAA,6DACLC,CAAK;AAAA,gEACFC,CAAQ;AAAA,iEACPC,CAAS;AAAA;AAAA;AAAA;AAAA,SAMjE,EACA,KAAK,EAAE,EACZ,GAAIR,IAAS,EACTH,EAAU,UAAYI,MACnB,CACHJ,EAAU,mBAAmB,YAAaI,CAAM,EAChD,MAAMQ,EAASZ,EAAU,iBAAiB,sBAAqB,EAAG,OAClE,SAAS,CACL,SAAU,SACV,IAAKY,EAAS,CAC1B,CAAS,CACJ,CACL,CC/CO,eAAeC,EAAiBC,EAAOC,EAAa,CACvD,GAAI,CACA,MAAMC,EAAM,qCACNC,EAAW,MAAMC,EAAM,IAAI,2BAA4B,CACzD,OAAQ,CACJ,IAAKF,EACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAMC,EACN,SAAU,IACb,CACb,CAAS,EAED,GAAIE,EAAS,KAAK,QAAU,EACxB,MAAM,IAAI,MAAM,iBAAiB,EAGzC,OAAOA,EAAS,IACf,OAAQE,EAAO,CACZ,MAAMA,CACT,CACL,CChBA,MAAMC,EAAW,SAAS,cAAc,cAAc,EAChDpB,EAAY,SAAS,cAAc,YAAY,EAC/CqB,EAAa,SAAS,cAAc,SAAS,EAC7CC,EAAc,SAAS,cAAc,UAAU,EAC/CC,EAAc,SAAS,cAAc,WAAW,EAEhDC,EAAW,IAAIC,EAAe,eAAgB,CAClD,SAAU,GACV,gBAAiB,MACjB,YAAa,OACb,aAAc,MACd,gBAAiB,SACjB,UAAW,GACb,CAAC,EAED,IAAIX,EACAX,EACAuB,EAEJ,SAASC,GAAkB,CACzBC,IAEAR,EAAS,iBAAiB,SAAUS,CAAY,CAClD,CAEA,eAAeA,EAAaC,EAAO,CACjCA,EAAM,eAAc,EAEpBC,IACA/B,EAAU,UAAY,GAEtBG,EAAO,EACPW,EAAQM,EAAS,cAAc,eAAe,EAAE,MAEhD,GAAI,CACF,MAAMY,EAAO,MAAMnB,EAAiBC,EAAOX,CAAI,EAC/CF,EAAa+B,EAAK,KAAM7B,CAAI,EAC5BqB,EAAS,QAAO,EAEhBE,EAAU,KAAK,KAAKM,EAAK,UAAY,EAAE,CACxC,OAAQb,EAAO,CACdc,EAAYd,CAAK,CACrB,QAAY,CACRS,IACAM,GACD,CACH,CAEA,SAAS,iBAAiB,mBAAoBP,CAAe,EAE7D,SAASM,EAAYd,EAAO,CAC1BO,EAAU,OACVQ,IACAlC,EAAU,UAAY,GACtBmC,EAAS,KAAK,CACZ,QAAS,MAAMhB,CAAK,uBACpB,MAAO,MACP,SAAU,WACV,SAAU,OACd,CAAG,CACH,CAEA,SAASY,GAAa,CACpBV,EAAW,MAAM,QAAU,OAC7B,CAEA,SAASO,GAAa,CACpBP,EAAW,MAAM,QAAU,MAC7B,CAEA,SAASe,GAAc,CACrBd,EAAY,UAAU,OAAO,QAAQ,CACvC,CAEA,SAASe,GAAc,CACrBf,EAAY,UAAU,IAAI,QAAQ,CACpC,CAEAC,EAAY,iBAAiB,QAAS,SAAY,CAChDpB,IACAiC,IAEA,GAAI,CACF,MAAME,EAAS,MAAMzB,EAAiBC,EAAOX,CAAI,EAEjDF,EAAaqC,EAAO,KAAMnC,CAAI,EAC9BqB,EAAS,QAAO,EAEZrB,EAAO,IACTkC,IACAH,IAEH,OAAQf,EAAO,CACdgB,EAAS,KAAK,CACZ,QAAS,IAAIhB,CAAK,0BAClB,MAAO,MACP,SAAU,WACV,SAAU,OAChB,CAAK,CACF,CACH,CAAC,EAED,SAASoB,GAAkB,CACrBpC,IAASuB,IACXA,EAAU,OACVW,IACAG,IACAL,EAAS,KAAK,CACZ,QAAS,iEACT,MAAO,MACP,SAAU,WACV,SAAU,OAChB,CAAK,EAEL,CAEAZ,EAAY,iBAAiB,QAASgB,CAAe,EAErD,SAASE,GAAkB,CACzBlB,EAAY,UAAU,OAAO,QAAQ,CACvC,CAEA,SAASiB,GAAkB,CACzBjB,EAAY,UAAU,IAAI,QAAQ,CACpC,CAEA,SAASW,GAAwB,CAC3B/B,GAAQuB,GAAWA,IAAY,OACjCc,IAEAC,GAEJ"}