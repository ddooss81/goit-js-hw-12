{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["const galleryEl = document.querySelector('.gallery-object');\nconst formElem = document.querySelector('.search-form');\n\nexport function renderImages(array) {\n    const markup = array\n        .map(\n        ({\n            largeImageURL,\n            webformatURL,\n            tags,\n            likes,\n            views,\n            comments,\n            downloads,\n        }) => {\n            return `\n        <div class=\"gallery\">\n            <a href=\"${largeImageURL}\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" title=\"${tags}\" width=\"380\" height=\"220\" />\n            <ul class=\"info-cards-container\">\n                <li class=\"info-cards-elements\">likes<span>${likes}</span></li>\n                <li class=\"info-cards-elements\">views<span>${views}</span></li>\n                <li class=\"info-cards-elements\">comments<span>${comments}</span></li>\n                <li class=\"info-cards-elements\">downloads<span>${downloads}</span></li>\n            </ul>\n            </a>\n        </div>\n        `;\n        }\n        )\n        .join('');\n    \n    \n    galleryEl.innerHTML = markup;\n\n}\n\n\nexport function renderMoreImages(images) {\n    const hitsArray = images['hits'];\n    const markup = hitsArray\n        .map(\n    ({ largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n        }) => {\n            return `\n        <div class=\"gallery\">\n            <a href=\"${largeImageURL}\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" title=\"${tags}\" width=\"380\" height=\"220\" />\n            <ul class=\"info-cards-container\">\n                <li class=\"info-cards-elements\">likes<span>${likes}</span></li>\n                <li class=\"info-cards-elements\">views<span>${views}</span></li>\n                <li class=\"info-cards-elements\">comments<span>${comments}</span></li>\n                <li class=\"info-cards-elements\">downloads<span>${downloads}</span></li>\n            </ul>\n            </a>\n        </div>\n        `;\n        }\n        )\n        .join('');\n    galleryEl.insertAdjacentHTML(\"beforeend\", markup);\n}\n","import axios from \"axios\";\n\nexport async function getPhotoSearch(value, currentPage) {\n    try {\n        const KEY = '42613362-c652a11a2e3360cb77c84ae86';\n        const response = await axios.get('https://pixabay.com/api/', {\n            params: {\n                key: KEY,\n                q: value,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: 'true',\n                page: currentPage,\n                per_page: '15'\n            }\n        });\n\n        if (response.data.total === 0) {\n            throw new Error('No images found');\n        }\n   \n    return response.data;\n    } catch (error) {\n        throw error; \n    }\n}\n\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport {renderImages} from './js/render-functions.js';\nimport {getPhotoSearch} from './js/pixabay-api.js';\nimport {renderMoreImages} from './js/render-functions.js';\n\n\nconst formElem = document.querySelector('.search-form');\nconst galleryEl = document.querySelector('.gallery-object');\nconst loaderElem = document.querySelector('.loader');\nconst loaderElem2 = document.querySelector('.loader2');\nconst loadMoreBtn = document.querySelector('.more-btn');\n\nconst options = {\n  captions: true,\n  captionSelector: 'img',\n  captionType: 'attr',\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  animation: 250,\n};\n\nlet value;\nlet page;\nlet maxPage;\n\ndocument.addEventListener('DOMContentLoaded', () => {\n\n    hideLoader();\n    \n    formElem.addEventListener('submit', onSubmit);\n\n\n    async function onSubmit(e) {\n    e.preventDefault();\n    showLoader();\n    galleryEl.innerHTML = '';\n    page = 1;\n    value = formElem.querySelector('.input-search').value;\n    try {\n        const data = await getPhotoSearch(value, page);\n        renderImages(data.hits);\n    \n        maxPage = Math.ceil(data.totalHits / 15);\n\n            let lightbox = new SimpleLightbox('.gallery-object a', options);\n            lightbox.on('show.simplelightbox');\n            lightbox.refresh();\n            formElem.reset();\n    \n    } catch (error) {\n        renderError(error);\n         \n    } finally {\n        hideLoader();\n        checkBtnVisibleStatus(); \n    }   \n    }\n})\n\n    function renderError(error) {\n        checkBtnVisibleStatus(); \n        galleryEl.innerHTML = '';\n            iziToast.show({\n            message: `\"${error}\". Please try again!`,\n            color: 'red',\n            position: 'topRight',\n            maxWidth: '400px',\n            }); \n    };\n\nfunction showLoader() {\n    loaderElem.style.display = 'block';\n}\n\nfunction hideLoader() {\n    loaderElem.style.display = 'none';\n}\nfunction showLoader2() {\n    loaderElem2.classList.remove('hidden');\n}\n\nfunction hideLoader2() {\n    loaderElem2.classList.add('hidden');\n}\n\nloadMoreBtn.addEventListener(\"click\", async () => {\n    page += 1;\n    showLoader2();\n    try {\n        const images = await getPhotoSearch(value, page);\n    \n        renderMoreImages(images);\n    \n            let lightbox = new SimpleLightbox('.gallery-object a', options);\n            lightbox.on('show.simplelightbox');\n            lightbox.refresh();\n            formElem.reset();\n            \n            const height = galleryEl.firstElementChild.getBoundingClientRect().height;\n            scrollBy({\n                behavior: 'smooth',\n                top: height * 2,\n            })\n\n        if (page > 1) {\n            hideLoader2();\n            checkBtnVisibleStatus();\n        };\n    } catch (error) {\n        console.log(error);\n    }\n});\n\nfunction endOfCollection () {\n    if (page === maxPage) {\n        hideLoader2();\n        hideMoreLoadBtn();\n        iziToast.show({\n            message: `\"We're sorry, but you've reached the end of search results.\"`,\n            color: 'red',\n            position: 'topRight',\n            maxWidth: '400px',\n        });\n        maxPage = undefined;\n    \n    }\n}\n\nloadMoreBtn.addEventListener(\"click\", endOfCollection)\n\nfunction showMoreLoadBtn() {\n  loadMoreBtn.classList.remove('hidden');\n}\nfunction hideMoreLoadBtn() {\n  loadMoreBtn.classList.add('hidden');\n}\n\nfunction checkBtnVisibleStatus() {\n    if (page >= maxPage || maxPage === undefined) {\n      hideMoreLoadBtn();\n  \n  } else {\n    showMoreLoadBtn();\n  }\n}\n"],"names":["galleryEl","renderImages","array","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","renderMoreImages","images","getPhotoSearch","value","currentPage","KEY","response","axios","error","formElem","loaderElem","loaderElem2","loadMoreBtn","options","page","maxPage","hideLoader","onSubmit","e","showLoader","data","lightbox","SimpleLightbox","renderError","checkBtnVisibleStatus","iziToast","showLoader2","hideLoader2","height","endOfCollection","hideMoreLoadBtn","showMoreLoadBtn"],"mappings":"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"}